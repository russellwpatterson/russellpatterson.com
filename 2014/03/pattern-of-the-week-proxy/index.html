<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Russell Patterson"><meta name=description content="Russell Patterson's personal website"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Pattern of the Week: Proxy"><meta name=twitter:description content="This is the sixth in a series of &ldquo;Pattern of the Week&rdquo; posts. I&rsquo;m primarily sticking with the Gang of Four patterns, but I may branch off occasionally. Thanks for reading.
Type: Structural
This week&rsquo;s pattern is called the Proxy pattern. This pattern is primarily used to add security or to implement caching for objects. For my example, I&rsquo;ll be adding security to this class:
public class SomeService : ISomeService { public List<string> GetStrings() { return new List<string> { &#34;String1&#34;, &#34;String2&#34;, &#34;String3&#34; }; } }  This is a pretty simple class, which implements the following interface:"><meta property="og:title" content="Pattern of the Week: Proxy"><meta property="og:description" content="This is the sixth in a series of &ldquo;Pattern of the Week&rdquo; posts. I&rsquo;m primarily sticking with the Gang of Four patterns, but I may branch off occasionally. Thanks for reading.
Type: Structural
This week&rsquo;s pattern is called the Proxy pattern. This pattern is primarily used to add security or to implement caching for objects. For my example, I&rsquo;ll be adding security to this class:
public class SomeService : ISomeService { public List<string> GetStrings() { return new List<string> { &#34;String1&#34;, &#34;String2&#34;, &#34;String3&#34; }; } }  This is a pretty simple class, which implements the following interface:"><meta property="og:type" content="article"><meta property="og:url" content="/2014/03/pattern-of-the-week-proxy/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-03-06T05:03:57+00:00"><meta property="article:modified_time" content="2014-03-06T05:03:57+00:00"><base href=/2014/03/pattern-of-the-week-proxy/><title>Pattern of the Week: Proxy · Russell Writes Code</title><link rel=canonical href=/2014/03/pattern-of-the-week-proxy/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.11.2/css/all.css integrity=sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=/css/coder.min.a4f332213a21ce8eb521670c614470c58923aaaf385e2a73982c31dd7642decb.css integrity="sha256-pPMyITohzo61IWcMYURwxYkjqq84XipzmCwx3XZC3ss=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.83.1"></head><body class=colorscheme-light><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Russell Writes Code</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About Me</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/things-i-work-on/>Things I Work On</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Pattern of the Week: Proxy</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i>
<time datetime=2014-03-06T05:03:57Z>March 6, 2014</time></span>
<span class=reading-time><i class="fas fa-clock"></i>
3-minute read</span></div><div class=categories><i class="fas fa-folder"></i>
<a href=/categories/pattern-of-the-week/>Pattern of the Week</a>
<span class=separator>•</span>
<a href=/categories/technical/>Technical</a></div></div></header><div><p><em>This is the sixth in a series of &ldquo;Pattern of the Week&rdquo; posts. I&rsquo;m primarily sticking with the <a href="http://www.amazon.com/gp/product/B000SEIBB8/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B000SEIBB8&linkCode=as2&tag=russepatte-20">Gang of Four</a> patterns, but I may branch off occasionally. Thanks for reading.</em></p><p>Type: <strong>Structural</strong></p><p>This week&rsquo;s pattern is called the Proxy pattern. This pattern is primarily used to add security or to implement caching for objects. For my example, I&rsquo;ll be adding security to this class:</p><pre><code>public class SomeService : ISomeService
{
    public List&lt;string&gt; GetStrings()
    {
        return new List&lt;string&gt;
            {
                &quot;String1&quot;,
                &quot;String2&quot;,
                &quot;String3&quot;
            };
    }
}
</code></pre><p>This is a pretty simple class, which implements the following interface:</p><pre><code>public interface ISomeService
{
    List&lt;string&gt; GetStrings();
}
</code></pre><p>Now, suppose I want to make sure that not everyone has access to the GetStrings method. Well, I could modify the GetStrings method itself, and add some complex code to check a user&rsquo;s permissions, or I could implement a Proxy to do that for me. The main benefit to using this approach is that I don&rsquo;t overly complicate GetStrings, and I can <a href=http://en.wikipedia.org/wiki/Separation_of_concerns>separate these two concerns</a> (permissions and data access). Here&rsquo;s my Proxy class:</p><pre><code>public class SomeServiceProxy : ISomeService
{
    private readonly ISomeService _someService;

    public SomeServiceProxy()
    {
        _someService = new SomeService();
    }

    public List&lt;string&gt; GetStrings()
    {
        ValidateAccess(&quot;GetStrings&quot;);

        return _someService.GetStrings();
    }

    private void ValidateAccess(string methodName)
    {
        // Here, we could call some other class to get whether 
        // the user has access to this whatever method they're accessing.
        // We could throw an exception if they dont have access.
        throw new SecurityException(&quot;You don't have access to this action.&quot;);
    }
}
</code></pre><p>The proxy implements the same interface as the original class. This means that you should be able to swap the proxy for the original object with minimal code changes. So how does this all work? Basically, we would use the Proxy to access the object, and if the user doesn&rsquo;t have access (which we&rsquo;re not checking here), a SecurityException will be thrown, preventing access to the underlying resource. Obviously, in a real-world use of this pattern, you would actually check the user&rsquo;s permissions in the ValidateAccess method (and always remember to default to least privilege on errors).</p><p>You may notice that this pattern is fairly similar to the <a href=http://russellwritescode.com/2014/02/pattern-of-the-week-2-decorator/>Decorator</a> pattern. The difference between the two, as far as I can tell, is that the Proxy actually owns the object that it is adding functionality to (it creates it), while the Decorator has the object passed in as a parameter in the constructor.</p><p>This is pretty much all there is to this pattern. If you need additional help, please take a look at the full source code below, or feel free to comment, and I&rsquo;ll respond directly.</p><p>Visit next week for an explanation of the Prototype pattern.</p><p><a href=https://github.com/rwpcpe/pattern-of-the-week/>View Sample Code</a></p></div><footer></footer></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js id=MathJax-script></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}}</script></section></div><footer class=footer><section class=container><p>Not a strong bowler.</p>© 2008 - 2021
Russell Patterson</section></footer></main></body></html>